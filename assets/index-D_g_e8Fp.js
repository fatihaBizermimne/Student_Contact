(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))$(p);new MutationObserver(p=>{for(const A of p)if(A.type==="childList")for(const b of A.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&$(b)}).observe(document,{childList:!0,subtree:!0});function c(p){const A={};return p.integrity&&(A.integrity=p.integrity),p.referrerPolicy&&(A.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?A.credentials="include":p.crossOrigin==="anonymous"?A.credentials="omit":A.credentials="same-origin",A}function $(p){if(p.ep)return;p.ep=!0;const A=c(p);fetch(p.href,A)}})();(function(h){Date.now||(Date.now=function(){return new Date().getTime()}),Math.trunc||(Math.trunc=function(l){return l<0?Math.ceil(l):Math.floor(l)}),Object.setPrototypeOf||(Object.setPrototypeOf=function(l,c){return l.__proto__=c,l}),h.WebSharper={Runtime:{Ctor:function(l,c){return l.prototype=c.prototype,l},Class:function(l,c,$){var p=l;if(c){p=new c;for(var A in l)p[A]=l[A]}var b=function(O){if(O)for(var y in O)this[y]=O[y]};if(b.prototype=p,$)for(var R in $)b[R]=$[R];return b},Clone:function(l){var c={};for(var $ of Object.getOwnPropertyNames(l))c[$]=l[$];return Object.setPrototypeOf(c,Object.getPrototypeOf(l)),c},NewObject:function(l){for(var c={},$=0;$<l.length;$++)c[l[$][0]]=l[$][1];return c},PrintObject:function(l){var c="{ ",$=!0;for(var p of Object.getOwnPropertyNames(l))$?$=!1:c+=", ",c+=p+" = "+l[p];return $?c+="}":c+=" }",c},DeleteEmptyFields:function(l,c){for(var $=0;$<c.length;$++){var p=c[$];l[p]===void 0&&delete l[p]}return l},GetOptional:function(l){return l===void 0?null:{$:1,$0:l}},SetOptional:function(l,c,$){$?l[c]=$.$0:delete l[c]},SetOrDelete:function(l,c,$){$===void 0?delete l[c]:l[c]=$},Apply:function(l,c,$){return l.apply(c,$)},Bind:function(l,c){return function(){return l.apply(this,arguments)}},CreateFuncWithArgs:function(l){return function(){return l(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(l){return function(){return l(this)}},CreateFuncWithThis:function(l){return function(){return l(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(l){return function(){return l(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(l,c){return function(){return c(Array.prototype.slice.call(arguments,0,l).concat([Array.prototype.slice.call(arguments,l)]))}},CreateFuncWithArgsRest:function(l,c){return function(){return c([Array.prototype.slice.call(arguments,0,l),Array.prototype.slice.call(arguments,l)])}},BindDelegate:function(l,c){var $=l.bind(c);return $.$Func=l,$.$Target=c,$},CreateDelegate:function(l){if(l.length==0)return null;if(l.length==1)return l[0];var c=function(){for(var $,p=0;p<l.length;p++)$=l[p].apply(null,arguments);return $};return c.$Invokes=l,c},CombineDelegates:function(l){for(var c=[],$=0;$<l.length;$++){var p=l[$];p&&("$Invokes"in p?c=c.concat(p.$Invokes):c.push(p))}return WebSharper.Runtime.CreateDelegate(c)},DelegateEqual:function(l,c){if(l===c)return!0;if(l==null||c==null)return!1;var $=l.$Invokes||[l],p=c.$Invokes||[c];if($.length!=p.length)return!1;for(var A=0;A<$.length;A++){var b=$[A],R=p[A];if(!(b===R||"$Func"in b&&"$Func"in R&&b.$Func===R.$Func&&b.$Target==R.$Target))return!1}return!0},ThisFunc:function(l){return function(){var c=Array.prototype.slice.call(arguments);return c.unshift(this),l.apply(null,c)}},ThisFuncOut:function(l){return function(){var c=Array.prototype.slice.call(arguments);return l.apply(c.shift(),c)}},ParamsFunc:function(l,c){return function(){var $=Array.prototype.slice.call(arguments);return c.apply(null,$.slice(0,l).concat([$.slice(l)]))}},ParamsFuncOut:function(l,c){return function(){var $=Array.prototype.slice.call(arguments);return c.apply(null,$.slice(0,l).concat($[l]))}},ThisParamsFunc:function(l,c){return function(){var $=Array.prototype.slice.call(arguments);return $.unshift(this),c.apply(null,$.slice(0,l+1).concat([$.slice(l+1)]))}},ThisParamsFuncOut:function(l,c){return function(){var $=Array.prototype.slice.call(arguments);return c.apply($.shift(),$.slice(0,l).concat($[l]))}},Curried:function(l,c,$){return $=$||[],function(p){var A=$.concat([p===void 0?null:p]);return c==1?l.apply(null,A):c==2?function(b){return l.apply(null,A.concat([b===void 0?null:b]))}:WebSharper.Runtime.Curried(l,c-1,A)}},Curried2:function(l){return function(c){return function($){return l(c,$)}}},Curried3:function(l){return function(c){return function($){return function(p){return l(c,$,p)}}}},UnionByType:function(l,c,$){for(var p=typeof c,A=0;A<l.length;A++){var b=l[A];if(typeof b=="number"){if(Array.isArray(c)&&(b==0||c.length==b))return{$:A,$0:c}}else if(b==p)return{$:A,$0:c}}if(!$)throw new Error("Type not expected for creating Choice value.")},MarkResizable:function(l){return Object.defineProperty(l,"resizable",{enumerable:!1,writable:!1,configurable:!1,value:!0}),l},MarkReadOnly:function(l){return Object.defineProperty(l,"readonly",{enumerable:!1,writable:!1,configurable:!1,value:!0}),l},ScriptBasePath:"./",ScriptPath:function(l,c){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":l+"/")+c},OnLoad:function(l){"load"in this||(this.load=[]),this.load.push(l)},Start:function(){function l(c){for(var $=0;$<c.length;$++)c[$]()}"load"in this&&(l(this.load),this.load=[])}}},h.WebSharper.Runtime.OnLoad(function(){h.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()}),h.ignore=function(){},h.id=function(l){return l},h.fst=function(l){return l[0]},h.snd=function(l){return l[1]},h.trd=function(l){return l[2]},h.console||(h.console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore})})(self);(function(h,l){l=h.Element.prototype,l.matches||(l.matches=l.msMatchesSelector||function(c){for(var $=(this.document||this.ownerDocument).querySelectorAll(c),p=0;$[p]&&$[p]!==e;++p);return!!$[p]}),l.closest||(l.closest=function(c){for(var $=this;$&&$.nodeType==1;){if($.matches(c))return $;$=$.parentNode}return null})})(self);(function(){for(var h=0,l=["webkit","moz"],c=0;c<l.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[l[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[l[c]+"CancelAnimationFrame"]||window[l[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function($,p){var A=new Date().getTime(),b=Math.max(0,16-(A-h)),R=window.setTimeout(function(){$(A+b)},b);return h=A+b,R}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function($){clearTimeout($)})})();(function(h){var l,c,$,p,A,b,R,O,y,be,B,j,it,wt,pe,Rt,d,x,ft,Ct,Re,je,qe,Ne,F,Ue,ve,ut,ye,m,M,k,Ke,w,ze,ae,se,Fe,Ge,Pe,D,q,ee,De,fe,W,he,f,ue,Z,Ve,Se,Je,U,we,gt,Q,Ie,Ye,ot,X,ht,Nt,Oe,St,Et,S,ke,H,We,At,te,I,ne,Ze,Me,Tt,_e,me,re,He,de,at,Qe,Ft,Dt,pt,Ce,Xe,Le,dt,le,It,ce,et,Ee,ge,Be,tt,kt,Mt,N,Ae,$t;l=h.ProjectWeb=h.ProjectWeb||{},c=l.ContactManager=l.ContactManager||{},$=c.Contact=c.Contact||{},p=h.WebSharper=h.WebSharper||{},A=p.Operators=p.Operators||{},b=p.Forms=p.Forms||{},R=b.Form=b.Form||{},O=p.Obj=p.Obj||{},y=p.UI=p.UI||{},be=y.Var=y.Var||{},B=p.List=p.List||{},j=B.T=B.T||{},it=p.JavaScript=p.JavaScript||{},wt=it.JS=it.JS||{},pe=h.StartupCode$ProjectWeb$Client=h.StartupCode$ProjectWeb$Client||{},Rt=it.Pervasives=it.Pervasives||{},d=y.Doc=y.Doc||{},x=y.View=y.View||{},ft=y.HtmlModule=y.HtmlModule||{},Ct=ft.attr=ft.attr||{},Re=b.View=b.View||{},je=y.Submitter=y.Submitter||{},qe=p.Utils=p.Utils||{},Ne=y.Client=y.Client||{},F=Ne.Templates=Ne.Templates||{},Ue=b.Pervasives=b.Pervasives||{},ve=b.Validation=b.Validation||{},ut=b.Result=b.Result||{},ye=y.Var$1=y.Var$1||{},m=y.Snap=y.Snap||{},M=y.AttrProxy=y.AttrProxy||{},k=p.Seq=p.Seq||{},Ke=b.ErrorMessage=b.ErrorMessage||{},w=p.Unchecked=p.Unchecked||{},ze=h.Node,ae=p.Collections=p.Collections||{},se=ae.Dictionary=ae.Dictionary||{},Fe=b.Fresh=b.Fresh||{},Ge=h.Object,Pe=y.ConcreteVar=y.ConcreteVar||{},D=y.Docs=y.Docs||{},q=y.Attrs=y.Attrs||{},ee=y.DomUtility=y.DomUtility||{},De=y.AttrModule=y.AttrModule||{},fe=y.Array=y.Array||{},W=p.Enumerator=p.Enumerator||{},he=W.T=W.T||{},f=p.Arrays=p.Arrays||{},ue=h.StartupCode$WebSharper_UI$Templates=h.StartupCode$WebSharper_UI$Templates||{},Z=ae.HashSet=ae.HashSet||{},Ve=y.Abbrev=y.Abbrev||{},Se=Ve.Fresh=Ve.Fresh||{},Je=y.DocElemNode=y.DocElemNode||{},U=y.BindVar=y.BindVar||{},we=y.Elt=y.Elt||{},gt=ae.DictionaryUtil=ae.DictionaryUtil||{},Q=F.Prepare=F.Prepare||{},Ie=p.Slice=p.Slice||{},Ye=ae.KeyCollection=ae.KeyCollection||{},ot=p.Numeric=p.Numeric||{},X=y.An=y.An||{},ht=Ne.Settings=Ne.Settings||{},Nt=Ve.Mailbox=Ve.Mailbox||{},Oe=h.StartupCode$WebSharper_Forms$Forms=h.StartupCode$WebSharper_Forms$Forms||{},St=Ne.Attrs=Ne.Attrs||{},Et=St.Dyn=St.Dyn||{},S=h.StartupCode$WebSharper_UI$Attr_Client=h.StartupCode$WebSharper_UI$Attr_Client||{},ke=y.Updates=y.Updates||{},H=p.Strings=p.Strings||{},We=Ne.Docs=Ne.Docs||{},At=We.RunState=We.RunState||{},te=We.NodeSet=We.NodeSet||{},I=p.Concurrency=p.Concurrency||{},ne=y.Anims=y.Anims||{},Ze=h.StartupCode$WebSharper_UI$Doc_Proxy=h.StartupCode$WebSharper_UI$Doc_Proxy||{},Me=h.StartupCode$WebSharper_UI$Abbrev=h.StartupCode$WebSharper_UI$Abbrev||{},Tt=p.Queue=p.Queue||{},_e=y.String=y.String||{},me=y.CheckedInput=y.CheckedInput||{},re=h.StartupCode$WebSharper_UI$DomUtility=h.StartupCode$WebSharper_UI$DomUtility||{},He=h.StartupCode$WebSharper_UI$Animation=h.StartupCode$WebSharper_UI$Animation||{},de=y.AppendList=y.AppendList||{},at=ae.HashSetUtil=ae.HashSetUtil||{},Qe=y.DynamicAttrNode=y.DynamicAttrNode||{},Ft=p.Char=p.Char||{},Dt=p.DateUtil=p.DateUtil||{},pt=h.Error,Ce=p.KeyNotFoundException=p.KeyNotFoundException||{},Xe=I.Scheduler=I.Scheduler||{},Le=y.Easing=y.Easing||{},dt=I.AsyncBody=I.AsyncBody||{},le=h.StartupCode$WebSharper_Main$Concurrency=h.StartupCode$WebSharper_Main$Concurrency||{},It=I.CT=I.CT||{},ce=Ve.HashSet=Ve.HashSet||{},et=p.CancellationTokenSource=p.CancellationTokenSource||{},Ee=We.DomNodes=We.DomNodes||{},ge=p.OperationCanceledException=p.OperationCanceledException||{},Be=p.Lazy=p.Lazy||{},tt=h.StartupCode$WebSharper_UI$AppendList=h.StartupCode$WebSharper_UI$AppendList||{},kt=p.LazyExtensionsProxy=p.LazyExtensionsProxy||{},Mt=kt.LazyRecord=kt.LazyRecord||{},N=p&&p.Runtime,Ae=h.console,$t=h.Date,c.Main=function(){var t,n;t=$.New("","","","",""),n=R.Render(N.Curried(c.RenderContact,6),R.Run(function(r){var i,u;i=c.editIndex().Get(),i==null?c.contactList().Set(new j({$:1,$0:r,$1:c.contactList().Get()})):(u=i.$0,c.contactList().Set(B.mapi(function(o,a){return o===u?r:a},c.contactList().Get())),c.editIndex().Set(null)),h.alert("Your Contact: "+r.firstName+" "+r.lastName+"!"),t=$.New("","","","","")},c.ContactForm(t))),F.LoadLocalTemplates(""),d.RunById("main",n)},c.editIndex=function(){return pe.$cctor(),pe.editIndex},c.contactList=function(){return pe.$cctor(),pe.contactList},c.RenderContact=function(t,n,r,i,u,o){return d.Element("section",[M.Create("class","section")],[d.Element("h2",[M.Create("class","subtitle")],[d.TextNode("Student Contact")]),d.Element("p",[M.Create("class","subhead")],[d.TextNode("A simple Website that stores, Updates and Deletes Student Contact Information")]),d.Element("div",[M.Create("class","field")],[d.Element("label",[M.Create("class","label")],[d.TextNode("First name: "),d.Input([M.Create("class","input")],t)]),c.ShowErrorsFor(Re.Through$1(o.view,t))]),d.Element("div",[M.Create("class","field")],[d.Element("label",[M.Create("class","label")],[d.TextNode("Last name: "),d.Input([M.Create("class","input")],n)]),c.ShowErrorsFor(Re.Through$1(o.view,n))]),d.Element("div",[M.Create("class","field")],[d.Element("label",[M.Create("class","label")],[d.TextNode("Email: "),d.EmailInput([M.Create("class","input")],r)]),c.ShowErrorsFor(Re.Through$1(o.view,r))]),d.Element("div",[M.Create("class","field")],[d.Element("label",[M.Create("class","label")],[d.TextNode("Phone: "),d.Input([M.Create("class","input")],i)]),c.ShowErrorsFor(Re.Through$1(o.view,i))]),d.Element("div",[M.Create("class","field")],[d.Element("label",[M.Create("class","label")],[d.TextNode("Address: "),d.Input([M.Create("class","input")],u)]),c.ShowErrorsFor(Re.Through$1(o.view,u))]),d.Element("div",[],[d.Button("Submit",[M.Create("class","button")],function(){o.Trigger()})]),d.Element("div",[],[d.Button("View Contacts",[M.Create("class","button")],function(){c.showModal()})]),d.EmbedView(x.Map(function(a){return a?d.Element("div",[M.Create("class","modal is-active")],[d.Element("div",[M.Create("class","modal-background")],[d.Button("",[],function(){c.hideModal()})]),d.Element("div",[M.Create("class","modal-content")],[d.Element("div",[M.Create("class","box")],[d.Element("h2",[M.Create("class","subtitle")],[d.TextNode("Contact List")]),d.BindView(function(s){return s.$==0?d.Element("p",[],[d.TextNode("No Contacts available")]):d.Element("ul",[M.Create("class","listing")],B.mapi(function(v,T){return d.Element("li",[],[d.TextNode("* - "+qe.toSafe(T.firstName)+" "+qe.toSafe(T.lastName)+" ("+qe.toSafe(T.email)+", "+qe.toSafe(T.phone)+", "+qe.toSafe(T.address)+")"),d.Button("Edit",[M.Create("class","button is-small")],function(){c.editIndex().Set({$:1,$0:v}),t.Set(T.firstName),n.Set(T.lastName),r.Set(T.email),i.Set(T.phone),u.Set(T.address)}),d.Button("Delete",[M.Create("class","button is-small")],function(){c.contactList().Set(B.choose(h.id,B.mapi(function(V,K){return V!==v?{$:1,$0:K}:null},c.contactList().Get())))})])},s))},c.contactList().get_View())])]),d.Element("div",[M.Create("class","modal-close is-large")],[d.Button("",[],function(){c.hideModal()})])]):d.get_Empty()},c.modalVisible().get_View()))])},c.ContactForm=function(t){return R.WithSubmit(Ue.op_LessMultiplyGreater(Ue.op_LessMultiplyGreater(Ue.op_LessMultiplyGreater(Ue.op_LessMultiplyGreater(Ue.op_LessMultiplyGreater(R.Return(N.Curried($.New,5)),ve.IsNotEmpty("Please enter the first name.",R.Yield(t.firstName))),ve.IsNotEmpty("Please enter the last name.",R.Yield(t.lastName))),ve.IsMatch("^\\w+([-+.']\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$","Invalid email address.",R.Yield(t.email))),ve.IsMatch("^[0-9]+$","Invalid phone number format.",R.Yield(t.phone))),R.Yield(t.address)))},c.ShowErrorsFor=function(t){return d.EmbedView(x.Map(function(n){var r;return n.$==1?(r=n.$0,d.Concat(B.ofSeq(k.delay(function(){return k.map(function(i){return d.Element("b",[M.Create("style","color:red")],[d.TextNode(i.message)])},r)})))):d.get_Empty()},t))},c.showModal=function(){c.modalVisible().Set(!0)},c.modalVisible=function(){return pe.$cctor(),pe.modalVisible},c.hideModal=function(){c.modalVisible().Set(!1)},$.New=function(t,n,r,i,u){return{firstName:t,lastName:n,email:r,phone:i,address:u}},A.FailWith=function(t){throw new pt(t)},A.KeyValue=function(t){return[t.K,t.V]},A.range=function(t,n){var r;return r=1+n-t,r<=0?[]:k.init(r,function(i){return i+t})},R.Run=function(t,n){return R.Map(function(r){return t(r),r},n)},R.Render=function(t,n){var r;return r=n.render(t),d.Append(d.EmbedView(x.Map(function(){return d.get_Empty()},n.view)),r)},R.Map=function(t,n){return R.MapResult(function(r){return ut.Map(t,r)},n)},R.Return=function(t){return R.New(Fe.Id(),x.Const({$:0,$0:t}),h.id)},R.Yield=function(t){return R.YieldVar(ye.Create$1(t))},R.WithSubmit=function(t){var n;return n=new je.New(t.view,{$:1,$0:j.Empty}),R.New(Fe.Id(),n.view,function(r){return t.render(r)(n)})},R.MapResult=function(t,n){return R.New(n.id,x.Map(t,n.view),n.render)},R.Apply=function(t,n){var r,i;return R.New(Fe.Id(),x.Map2(ut.Apply,t.view,n.view),(r=t.render,i=n.render,function(u){return i(r(u))}))},R.YieldVar=function(t){return R.New(t.get_Id(),x.Map(function(n){return{$:0,$0:n}},t.get_View()),function(n){return n(t)})},O=p.Obj=N.Class({Equals:function(t){return this===t},GetHashCode:function(){return-1}},null,O),O.New=N.Ctor(function(){},O),be=y.Var=N.Class({},O,be),be.New=N.Ctor(function(){O.New.call(this)},be),j=B.T=N.Class({GetEnumerator:function(){return new he.New(this,null,function(t){var n;return n=t.s,n.$==0?!1:(t.c=n.$0,t.s=n.$1,!0)},void 0)}},null,j),j.Empty=new j({$:0}),B.mapi=function(t,n){var r,i,u,o,a,s;if(n.$==0)return n;for(a=new j({$:1}),r=a,i=n,u=0,o=!0;o;)r.$0=t(u,i.$0),i=i.$1,i.$==0?o=!1:(r=(s=new j({$:1}),r.$1=s,s),u=u+1);return r.$1=j.Empty,a},B.choose=function(t,n){return B.ofSeq(k.choose(t,n))},B.filter=function(t,n){var r,i,u,o,a,s;if(n.$==0)return n;for(r=j.Empty,i=r,u=n,o=!0;o;)t(u.$0)&&(r.$==0?(r=new j({$:1}),i=r):i=(a=new j({$:1}),i.$1=a,a),s=u.$0,i.$=1,i.$0=s),u=u.$1,u.$==0&&(o=!1);return r.$!=0&&(i.$1=j.Empty),r},B.ofSeq=function(t){var n,r,i,u,o,a;if(t instanceof j)return t;if(t instanceof h.Array)return B.ofArray(t);n=W.Get(t);try{if(i=n.MoveNext(),!i)r=j.Empty;else{for(o=new j({$:1}),u=o;i;)u.$0=n.Current(),n.MoveNext()?u=(a=new j({$:1}),u.$1=a,a):i=!1;u.$1=j.Empty,r=o}return r}finally{typeof n=="object"&&"Dispose"in n&&n.Dispose()}},B.ofArray=function(t){var n,r,i;for(n=j.Empty,r=f.length(t)-1,i=0;r>=i;r--)n=new j({$:1,$0:f.get(t,r),$1:n});return n},B.append=function(t,n){var r,i,u,o,a;if(t.$==0)return n;if(n.$==0)return t;for(o=new j({$:1}),r=o,i=t,u=!0;u;)r.$0=i.$0,i=i.$1,i.$==0?u=!1:r=(a=new j({$:1}),r.$1=a,a);return r.$1=n,o},B.head=function(t){return t.$==1?t.$0:B.listEmpty()},B.tail=function(t){return t.$==1?t.$1:B.listEmpty()},B.listEmpty=function(){return A.FailWith("The input list was empty.")},wt.GetFieldValues=function(t){var n;n=[];for(var r in t)n.push(t[r]);return n},pe.$cctor=function(){pe.$cctor=h.ignore,pe.contactList=ye.Create$1(j.Empty),pe.editIndex=ye.Create$1(null),pe.modalVisible=ye.Create$1(!1)},Rt.NewFromSeq=function(t){var n,r,i;n={},r=W.Get(t);try{for(;r.MoveNext();)i=r.Current(),n[i[0]]=i[1]}finally{typeof r=="object"&&"Dispose"in r&&r.Dispose()}return n},R.New=function(t,n,r){return{id:t,view:n,render:r}},d=y.Doc=N.Class({},O,d),d.Append=function(t,n){return d.Mk({$:0,$0:t.docNode,$1:n.docNode},x.Map2Unit(t.updates,n.updates))},d.get_Empty=function(){return d.Mk(null,x.Const())},d.RunById=function(t,n){var r;r=self.document.getElementById(t),w.Equals(r,null)?A.FailWith("invalid id: "+t):d.Run(r,n)},d.Mk=function(t,n){return new d.New(t,n)},d.EmbedView=function(t){var n;return n=D.CreateEmbedNode(),d.Mk({$:2,$0:n},x.Map(h.ignore,x.Bind(function(r){return D.UpdateEmbedNode(n,r.docNode),r.updates},t)))},d.TextNode=function(t){return d.Mk({$:5,$0:self.document.createTextNode(t)},x.Const())},d.Input=function(t,n){return d.InputInternal("input",function(){return k.append(t,[De.Value(n)])})},d.Concat=function(t){var n;return n=fe.ofSeqNonCopying(t),fe.TreeReduce(d.get_Empty(),d.Append,n)},d.EmailInput=function(t,n){return d.InputInternal("input",function(){return k.append(t,[De.Value(n),M.Create("type","email")])})},d.Button=function(t,n,r){var i;return i=M.Concat(n),we.New(d.Clickable("button",r),i,d.TextNode(t))},d.Run=function(t,n){D.LinkElement(t,n.docNode),d.RunInPlace(!1,t,n)},d.Element=function(t,n,r){var i,u;return i=M.Concat(n),u=d.Concat(r),we.New(self.document.createElement(t),i,u)},d.InputInternal=function(t,n){var r;return r=self.document.createElement(t),we.New(r,M.Concat(n(r)),d.get_Empty())},d.Clickable=function(t,n){var r;return r=self.document.createElement(t),r.addEventListener("click",function(i){return i.preventDefault(),n()},!1),r},d.BindView=function(t,n){return d.EmbedView(x.Map(t,n))},d.RunInPlace=function(t,n,r){var i;i=D.CreateRunState(n,r.docNode),x.Sink(X.get_UseAnimations()||ht.BatchUpdatesEnabled()?Nt.StartProcessor(D.PerformAnimatedUpdate(t,i,r.docNode)):function(){D.PerformSyncUpdate(t,i,r.docNode)},r.updates)},d.New=N.Ctor(function(t,n){O.New.call(this),this.docNode=t,this.updates=n},d),x.Map=function(t,n){return x.CreateLazy(function(){return m.Map(t,n())})},x.Map2Unit=function(t,n){return x.CreateLazy(function(){return m.Map2Unit(t(),n())})},x.CreateLazy=function(t){var n;return n={c:null,o:t},function(){var r,i;return r=n.c,r===null&&(r=n.o(),n.c=r,i=r.s,i!=null&&i.$==0?n.o=null:m.WhenObsoleteRun(r,function(){n.c=null})),r}},x.Const=function(t){var n;return n=m.New({$:0,$0:t}),function(){return n}},x.Bind=function(t,n){return x.Join(x.Map(t,n))},x.Map2=function(t,n,r){return x.CreateLazy(function(){return m.Map2(t,n(),r())})},x.Join=function(t){return x.CreateLazy(function(){return m.Join(t())})},x.Sink=function(t,n){function r(){m.WhenRun(n(),t,function(){I.scheduler().Fork(r)})}I.scheduler().Fork(r)},x.SnapshotOn=function(t,n,r){var i;return i=m.New({$:2,$0:t,$1:[]}),x.CreateLazy(function(){return i.s==null?m.SnapshotOn(n(),r()):(m.WhenObsolete(n(),i),i)})},Ct=ft.attr=N.Class({},O,Ct),Re.Through$1=function(t,n){return x.Map(function(r){return r.$==1?{$:1,$0:B.filter(function(i){return i.id==n.get_Id()},r.$0)}:r},t)},je=y.Submitter=N.Class({Trigger:function(){this.var.Set(null)}},O,je),je.New=N.Ctor(function(t,n){O.New.call(this),this.input=t,this.var=ye.Create(),this.view=x.SnapshotOn(n,this.var.get_View(),this.input)},je),qe.toSafe=function(t){return t??""},F.LoadLocalTemplates=function(t){F.LocalTemplatesLoaded()||(F.set_LocalTemplatesLoaded(!0),F.LoadNestedTemplates(self.document.body,"")),F.LoadedTemplates().set_Item(t,F.LoadedTemplateFile(""))},F.LocalTemplatesLoaded=function(){return ue.$cctor(),ue.LocalTemplatesLoaded},F.set_LocalTemplatesLoaded=function(t){ue.$cctor(),ue.LocalTemplatesLoaded=t},F.LoadNestedTemplates=function(t,n){var r,i,u,o,a,s,v,T,V,K,P,L,C,g,E,_,z,ie,G,Y,oe;function $e(J){var Te,xe;r.ContainsKey(J)||(Te=(xe=null,[i.TryGetValue(J,{get:function(){return xe},set:function(nt){xe=nt}}),xe]),Te[0]?(oe.SAdd(J),i.RemoveKey(J),F.PrepareTemplateStrict(n,{$:1,$0:J},Te[1],{$:1,$0:$e})):Ae.warn(oe.Contains(J)?"Encountered loop when instantiating "+J:"Local template does not exist: "+J))}for(r=F.LoadedTemplateFile(n),i=new se.New$5,u=t.querySelectorAll("[ws-template]"),o=0,a=u.length-1;o<=a;o++)s=u[o],v=s.getAttribute("ws-template").toLowerCase(),s.removeAttribute("ws-template"),i.set_Item(v,F.FakeRootSingle(s));for(T=t.querySelectorAll("[ws-children-template]"),V=0,K=T.length-1;V<=K;V++)P=T[V],L=P.getAttribute("ws-children-template").toLowerCase(),P.removeAttribute("ws-children-template"),i.set_Item(L,F.FakeRoot(P));for(C=t.querySelectorAll("template[id]"),g=0,E=C.length-1;g<=E;g++)_=C[g],i.set_Item(_.getAttribute("id").toLowerCase(),F.FakeRootFromHTMLTemplate(_));for(z=t.querySelectorAll("template[name]"),ie=0,G=z.length-1;ie<=G;ie++)Y=z[ie],i.set_Item(Y.getAttribute("name").toLowerCase(),F.FakeRootFromHTMLTemplate(Y));for(oe=new Z.New$3;i.count>0;)$e(k.head(i.Keys()))},F.LoadedTemplates=function(){return ue.$cctor(),ue.LoadedTemplates},F.LoadedTemplateFile=function(t){var n,r,i;return n=(r=null,[F.LoadedTemplates().TryGetValue(t,{get:function(){return r},set:function(u){r=u}}),r]),n[0]?n[1]:(i=new se.New$5,F.LoadedTemplates().set_Item(t,i),i)},F.FakeRootSingle=function(t){var n,r,i,u;return t.removeAttribute("ws-template"),n=t.getAttribute("ws-replace"),n==null||(t.removeAttribute("ws-replace"),r=t.parentNode,w.Equals(r,null)||(i=self.document.createElement(t.tagName),i.setAttribute("ws-replace",n),r.replaceChild(i,t))),u=self.document.createElement("div"),u.appendChild(t),u},F.FakeRoot=function(t){var n;for(n=self.document.createElement("div");t.hasChildNodes();)n.appendChild(t.firstChild);return n},F.FakeRootFromHTMLTemplate=function(t){var n,r,i,u;for(n=self.document.createElement("div"),r=t.content,i=0,u=r.childNodes.length-1;i<=u;i++)n.appendChild(r.childNodes[i].cloneNode(!0));return n},F.PrepareTemplateStrict=function(t,n,r,i){var u,o;function a(P,L){var C,g,E,_,z,ie,G,Y,oe,$e,J,Te,xe,nt,lt,qt,ct,Lt,mt,Ut,xt,bt,vt,Pt,st;function Vt(rt){}for(;;)switch(P){case 0:if(L!==null)C=L.nextSibling,w.Equals(L.nodeType,ze.TEXT_NODE)?Q.convertTextNode(L):w.Equals(L.nodeType,ze.ELEMENT_NODE)&&v(L),L=C;else return null;break;case 1:if(z=Ie.string(L.nodeName,{$:1,$0:3},null).toLowerCase(),ie=(g=z.indexOf("."),g===-1?[t,z]:[Ie.string(z,null,{$:1,$0:g-1}),Ie.string(z,{$:1,$0:g+1},null)]),G=ie[1],Y=ie[0],Y!=""&&!F.LoadedTemplates().ContainsKey(Y))return Q.failNotLoaded(G);if(Y==""&&i!=null&&i.$0(G),oe=F.LoadedTemplates().Item(Y),oe.ContainsKey(G)){for($e=oe.Item(G),J=$e.cloneNode(!0),Te=new Z.New$3,xe=new se.New$5,nt=L.attributes,lt=0,qt=nt.length-1;lt<=qt;lt++)ct=nt.item(lt).name.toLowerCase(),xe.set_Item(ct,(Lt=nt.item(lt).nodeValue,Lt==""?ct:Lt.toLowerCase())),Te.SAdd(ct)||Ae.warn("Hole mapped twice",ct);for(mt=0,Ut=L.childNodes.length-1;mt<=Ut;mt++)xt=L.childNodes[mt],w.Equals(xt.nodeType,ze.ELEMENT_NODE)&&(Te.SAdd(xt.nodeName.toLowerCase())||Ae.warn("Hole filled twice",G));if(bt=L.childNodes.length===1&&w.Equals(L.firstChild.nodeType,ze.TEXT_NODE),bt&&(E=Q.fillTextHole(J,L.firstChild.textContent,G),function(rt){return function(yt){yt!=null&&rt(yt.$0)}}((_=function(rt){return function(yt){return rt.SAdd(yt)}}(Te),function(rt){return _(rt),void 0}))(E)),Q.removeHolesExcept(J,Te),!bt)for(vt=0,Pt=L.childNodes.length-1;vt<=Pt;vt++)st=L.childNodes[vt],w.Equals(st.nodeType,ze.ELEMENT_NODE)&&(st.hasAttributes()?Q.fillInstanceAttrs(J,st):s(J,st));Q.mapHoles(J,xe),Q.fill(J,L.parentNode,L),L.parentNode.removeChild(L);return}else return Q.failNotLoaded(G)}}function s(P,L){var C,g,E,_;function z(ie,G){var Y;if(E=="title"&&L.hasChildNodes())for(Y=ee.ParseHTMLIntoFakeRoot(L.textContent),L.removeChild(L.firstChild);Y.hasChildNodes();)L.appendChild(Y.firstChild);return v(L),Q.fill(L,ie,G)}if(E=L.nodeName.toLowerCase(),F.foreachNotPreserved(P,"[ws-attr-holes]",function(ie){var G,Y,oe,$e,J;for(G=H.SplitChars(ie.getAttribute("ws-attr-holes"),[" "],1),Y=0,oe=G.length-1;Y<=oe;Y++)$e=f.get(G,Y),ie.setAttribute($e,(J=new h.RegExp("\\${"+E+"}","ig"),ie.getAttribute($e).replace(J,L.textContent)))}),_=P.querySelector("[ws-hole="+E+"]"),w.Equals(_,null))return C=P.querySelector("[ws-replace="+E+"]"),w.Equals(C,null)?(g=P.querySelector("slot[name="+E+"]"),P.tagName.toLowerCase()=="template"?(z(g.parentNode,g),void g.parentNode.removeChild(g)):null):(z(C.parentNode,C),void C.parentNode.removeChild(C));for(;_.hasChildNodes();)_.removeChild(_.lastChild);return _.removeAttribute("ws-hole"),z(_,null)}function v(P){P.hasAttribute("ws-preserve")||(H.StartsWith(P.nodeName.toLowerCase(),"ws-")?V(P):(Q.convertAttrs(P),T(P.firstChild)))}function T(P){return a(0,P)}function V(P){return a(1,P)}function K(P){for(var L,C,g,E,_,z,ie,G,Y,oe,$e,J;;)if(L=P.querySelector("[ws-template]"),w.Equals(L,null))if(C=P.querySelector("[ws-children-template]"),w.Equals(C,null)){for(g=P.querySelectorAll("template[id]"),E=1,_=g.length-1;E<=_;E++)z=g[E],u.Contains(z)||(F.PrepareTemplateStrict(t,{$:1,$0:z.getAttribute("id")},z,null),u.SAdd(z));for(ie=P.querySelectorAll("template[name]"),G=1,Y=ie.length-1;G<=Y;G++)oe=ie[G],u.Contains(oe)||(F.PrepareTemplateStrict(t,{$:1,$0:oe.getAttribute("name")},oe,null),u.SAdd(oe));return null}else $e=C.getAttribute("ws-children-template"),C.removeAttribute("ws-children-template"),F.PrepareTemplateStrict(t,{$:1,$0:$e},C,null),P=P;else J=L.getAttribute("ws-template"),F.PrepareSingleTemplate(t,{$:1,$0:J},L)(null),P=P}u=new Z.New$3,o=(n==null?"":n.$0).toLowerCase(),F.LoadedTemplateFile(t).set_Item(o,r),r.hasChildNodes()&&(K(r),T(r.firstChild))},F.foreachNotPreserved=function(t,n,r){ee.IterSelector(t,n,function(i){i.closest("[ws-preserve]")==null&&r(i)})},F.PrepareSingleTemplate=function(t,n,r){var i;return i=F.FakeRootSingle(r),function(u){F.PrepareTemplateStrict(t,n,i,u)}},F.TextHoleRE=function(){return ue.$cctor(),ue.TextHoleRE},Ue.op_LessMultiplyGreater=function(t,n){return R.Apply(t,n)},ve.IsNotEmpty=function(t,n){return ve.Is(function(r){return r!=""},t,n)},ve.IsMatch=function(t,n,r){var i;return ve.Is((i=new h.RegExp(t),function(u){return i.test(u)}),n,r)},ve.Is=function(t,n,r){return R.MapResult(function(i){return i.$==1||t(i.$0)?i:{$:1,$0:B.ofArray([new Ke.New(r.id,n)])}},r)},ut.Map=function(t,n){return n.$==1?{$:1,$0:n.$0}:{$:0,$0:t(n.$0)}},ut.Apply=function(t,n){return t.$==0?n.$==0?{$:0,$0:t.$0(n.$0)}:{$:1,$0:n.$0}:n.$==0?{$:1,$0:t.$0}:{$:1,$0:B.append(t.$0,n.$0)}},ye=y.Var$1=N.Class({},O,ye),ye.Create$1=function(t){return new Pe.New(!1,m.New({$:2,$0:t,$1:[]}),t)},ye.Create=function(){return new Pe.New(!1,m.New({$:2,$0:null,$1:[]}),null)},x=y.View=N.Class({},null,x),m.Map=function(t,n){var r,i;return r=n.s,r!=null&&r.$==0?m.New({$:0,$0:t(r.$0)}):(i=m.New({$:3,$0:[],$1:[]}),m.When(n,function(u){m.MarkDone(i,n,t(u))},i),i)},m.Map2Unit=function(t,n){var r,i,u;function o(){var a,s,v;a=u.s,!(a!=null&&a.$==0||a!=null&&a.$==2)&&(s=m.ValueAndForever(t),v=m.ValueAndForever(n),s!=null&&s.$==1&&v!=null&&v.$==1&&(s.$0[1]&&v.$0[1]?m.MarkForever(u,null):m.MarkReady(u,null)))}return r=t.s,i=n.s,r!=null&&r.$==0?i!=null&&i.$==0?m.New({$:0,$0:null}):n:i!=null&&i.$==0?t:(u=m.New({$:3,$0:[],$1:[]}),m.When(t,o,u),m.When(n,o,u),u)},m.WhenObsoleteRun=function(t,n){var r;r=t.s,r==null?n():(r!=null&&r.$==2||r!=null&&r.$==3)&&r.$1.push(n)},m.When=function(t,n,r){var i;i=t.s,i==null?m.Obsolete(r):i!=null&&i.$==2?(m.EnqueueSafe(i.$1,r),n(i.$0)):i!=null&&i.$==3?(i.$0.push(n),m.EnqueueSafe(i.$1,r)):n(i.$0)},m.MarkDone=function(t,n,r){var i;i=n.s,i!=null&&i.$==0?m.MarkForever(t,r):m.MarkReady(t,r)},m.ValueAndForever=function(t){var n;return n=t.s,n!=null&&n.$==0?{$:1,$0:[n.$0,!0]}:n!=null&&n.$==2?{$:1,$0:[n.$0,!1]}:null},m.MarkForever=function(t,n){var r,i,u,o;if(r=t.s,r!=null&&r.$==3)for(t.s={$:0,$0:n},i=r.$0,u=0,o=f.length(i)-1;u<=o;u++)f.get(i,u)(n)},m.MarkReady=function(t,n){var r,i,u,o;if(r=t.s,r!=null&&r.$==3)for(t.s={$:2,$0:n,$1:r.$1},i=r.$0,u=0,o=f.length(i)-1;u<=o;u++)f.get(i,u)(n)},m.EnqueueSafe=function(t,n){var r,i,u,o;if(t.push(n),t.length%20===0)for(r=t.slice(0),Tt.Clear(t),i=0,u=f.length(r)-1;i<=u;i++)o=f.get(r,i),typeof o=="object"?function(a){a.s&&t.push(a)}(o):function(a){t.push(a)}(o)},m.Map2=function(t,n,r){var i,u,o;function a(s){var v,T,V;v=o.s,!(v!=null&&v.$==0||v!=null&&v.$==2)&&(T=m.ValueAndForever(n),V=m.ValueAndForever(r),T!=null&&T.$==1&&V!=null&&V.$==1&&(T.$0[1]&&V.$0[1]?m.MarkForever(o,t(T.$0[0],V.$0[0])):m.MarkReady(o,t(T.$0[0],V.$0[0]))))}return i=n.s,u=r.s,i!=null&&i.$==0?u!=null&&u.$==0?m.New({$:0,$0:t(i.$0,u.$0)}):m.Map2Opt1(t,i.$0,r):u!=null&&u.$==0?m.Map2Opt2(t,u.$0,n):(o=m.New({$:3,$0:[],$1:[]}),m.When(n,a,o),m.When(r,a,o),o)},m.Join=function(t){var n;return n=m.New({$:3,$0:[],$1:[]}),m.When(t,function(r){var i;i=r(),m.When(i,function(u){var o,a;o=i.s,o!=null&&o.$==0&&(a=t.s,a!=null&&a.$==0)?m.MarkForever(n,u):m.MarkReady(n,u)},n)},n),n},m.WhenRun=function(t,n,r){var i;i=t.s,i==null?r():i!=null&&i.$==2?(i.$1.push(r),n(i.$0)):i!=null&&i.$==3?(i.$0.push(n),i.$1.push(r)):n(i.$0)},m.Map2Opt1=function(t,n,r){return m.Map(function(i){return t(n,i)},r)},m.Map2Opt2=function(t,n,r){return m.Map(function(i){return t(i,n)},r)},m.SnapshotOn=function(t,n){var r;function i(u){var o,a,s;o=r.s,!(o!=null&&o.$==0||o!=null&&o.$==2)&&(a=m.ValueAndForever(t),s=m.ValueAndForever(n),a!=null&&a.$==1&&s!=null&&s.$==1&&(a.$0[1]||s.$0[1]?m.MarkForever(r,s.$0[0]):m.MarkReady(r,s.$0[0])))}return r=m.New({$:3,$0:[],$1:[]}),m.When(t,i,r),m.WhenReady(n,i),r},m.WhenObsolete=function(t,n){var r;r=t.s,r==null?m.Obsolete(n):(r!=null&&r.$==2||r!=null&&r.$==3)&&m.EnqueueSafe(r.$1,n)},m.Copy=function(t){var n,r,i;return n=t.s,n==null?t:n!=null&&n.$==2?(r=m.New({$:2,$0:n.$0,$1:[]}),m.WhenObsolete(t,r),r):n!=null&&n.$==3?(i=m.New({$:3,$0:[],$1:[]}),m.When(t,function(u){m.MarkDone(i,t,u)},i),i):t},m.WhenReady=function(t,n){var r,i;switch(i=t.s,i!=null&&i.$==2?(r=i.$0,0):i==null?1:i!=null&&i.$==3?2:(r=i.$0,0)){case 0:n(r);break;case 1:break;case 2:i.$0.push(n);break}},M=y.AttrProxy=N.Class({},null,M),M.Create=function(t,n){return q.Static(function(r){r.setAttribute(t,n)})},M.Concat=function(t){var n;return n=fe.ofSeqNonCopying(t),fe.TreeReduce(q.EmptyAttr(),M.Append,n)},M.Append=function(t,n){return q.AppendTree(t,n)},k.delay=function(t){return{GetEnumerator:function(){return W.Get(t())}}},k.map=function(t,n){return{GetEnumerator:function(){var r;return r=W.Get(n),new he.New(null,null,function(i){return r.MoveNext()&&(i.c=t(r.Current()),!0)},function(){r.Dispose()})}}},k.choose=function(t,n){return k.collect(function(r){var i;return i=t(r),i==null?j.Empty:B.ofArray([i.$0])},n)},k.append=function(t,n){return{GetEnumerator:function(){var r,i;return r=W.Get(t),i=[!0],new he.New(r,null,function(u){var o;return u.s.MoveNext()?(u.c=u.s.Current(),!0):(o=u.s,w.Equals(o,null)||o.Dispose(),u.s=null,i[0]&&(i[0]=!1,u.s=W.Get(n),u.s.MoveNext()?(u.c=u.s.Current(),!0):(u.s.Dispose(),u.s=null,!1)))},function(u){var o;o=u.s,w.Equals(o,null)||o.Dispose()})}}},k.collect=function(t,n){return k.concat(k.map(t,n))},k.head=function(t){var n;n=W.Get(t);try{return n.MoveNext()?n.Current():k.insufficient()}finally{typeof n=="object"&&"Dispose"in n&&n.Dispose()}},k.concat=function(t){return{GetEnumerator:function(){var n;function r(i){for(var u;;)if(u=i.s,w.Equals(u,null))if(n.MoveNext())i.s=W.Get(n.Current()),i=i;else return n.Dispose(),!1;else{if(u.MoveNext())return i.c=u.Current(),!0;i.Dispose(),i.s=null,i=i}}return n=W.Get(t),new he.New(null,null,r,function(i){var u;u=i.s,w.Equals(u,null)||u.Dispose(),w.Equals(n,null)||n.Dispose()})}}},k.fold=function(t,n,r){var i,u;i=n,u=W.Get(r);try{for(;u.MoveNext();)i=t(i,u.Current());return i}finally{typeof u=="object"&&"Dispose"in u&&u.Dispose()}},k.init=function(t,n){return k.take(t,k.initInfinite(n))},k.iter=function(t,n){var r;r=W.Get(n);try{for(;r.MoveNext();)t(r.Current())}finally{typeof r=="object"&&"Dispose"in r&&r.Dispose()}},k.forall=function(t,n){return!k.exists(function(r){return!t(r)},n)},k.take=function(t,n){return t<0&&k.nonNegative(),{GetEnumerator:function(){var r;return r=[W.Get(n)],new he.New(0,null,function(i){var u;return i.s=i.s+1,i.s>t?!1:(u=r[0],w.Equals(u,null)?k.insufficient():u.MoveNext()?(i.c=u.Current(),i.s===t&&(u.Dispose(),r[0]=null),!0):(u.Dispose(),r[0]=null,k.insufficient()))},function(){var i;i=r[0],w.Equals(i,null)||i.Dispose()})}}},k.initInfinite=function(t){return{GetEnumerator:function(){return new he.New(0,null,function(n){return n.c=t(n.s),n.s=n.s+1,!0},void 0)}}},k.max=function(t){var n,r,i;n=W.Get(t);try{for(n.MoveNext()||k.seqEmpty(),r=n.Current();n.MoveNext();)i=n.Current(),w.Compare(i,r)===1&&(r=i);return r}finally{typeof n=="object"&&"Dispose"in n&&n.Dispose()}},k.exists=function(t,n){var r,i;r=W.Get(n);try{for(i=!1;!i&&r.MoveNext();)i=t(r.Current());return i}finally{typeof r=="object"&&"Dispose"in r&&r.Dispose()}},k.seqEmpty=function(){return A.FailWith("The input sequence was empty.")},Ke=b.ErrorMessage=N.Class({},O,Ke),Ke.New=N.Ctor(function(t,n){O.New.call(this),this.id=t,this.message=n},Ke),w.Equals=function(t,n){var r,i;if(t===n)return!0;if(r=typeof t,r=="object"){if(t==null||n===null||n===void 0||!w.Equals(typeof n,"object"))return!1;if("Equals"in t)return t.Equals(n);if("Equals"in n)return!1;if(t instanceof h.Array&&n instanceof h.Array)return w.arrayEquals(t,n);if(t instanceof h.Date&&n instanceof h.Date)return w.dateEquals(t,n);i=[!0];for(var u in t)if(function(a){return i[0]=!t.hasOwnProperty(a)||n.hasOwnProperty(a)&&w.Equals(t[a],n[a]),!i[0]}(u))break;if(i[0]){for(var o in n)if(function(a){return i[0]=!n.hasOwnProperty(a)||t.hasOwnProperty(a),!i[0]}(o))break}return i[0]}else return r=="function"&&("$Func"in t?t.$Func===n.$Func&&t.$Target===n.$Target:"$Invokes"in t&&"$Invokes"in n&&w.arrayEquals(t.$Invokes,n.$Invokes))},w.arrayEquals=function(t,n){var r,i;if(f.length(t)===f.length(n)){for(r=!0,i=0;r&&i<f.length(t);)w.Equals(f.get(t,i),f.get(n,i))||(r=!1),i=i+1;return r}else return!1},w.dateEquals=function(t,n){return t.getTime()===n.getTime()},w.Hash=function(t){var n;return n=typeof t,n=="function"?0:n=="boolean"?t?1:0:n=="number"?t:n=="string"?w.hashString(t):n=="object"?t==null?0:t instanceof h.Array?w.hashArray(t):w.hashObject(t):0},w.hashString=function(t){var n,r,i;if(t===null)return 0;for(n=5381,r=0,i=t.length-1;r<=i;r++)n=w.hashMix(n,t[r].charCodeAt());return n},w.hashArray=function(t){var n,r,i;for(n=-34948909,r=0,i=f.length(t)-1;r<=i;r++)n=w.hashMix(n,w.Hash(f.get(t,r)));return n},w.hashObject=function(t){var n;if("GetHashCode"in t)return t.GetHashCode();n=[0];for(var r in t)(function(i){return n[0]=w.hashMix(w.hashMix(n[0],w.hashString(i)),w.Hash(t[i])),!1})(r);return n[0]},w.hashMix=function(t,n){return(t<<5)+t+n},w.Compare=function(t,n){var r,i,u;if(t===n)return 0;switch(r=typeof t,r=="function"?1:r=="boolean"||r=="number"||r=="string"?2:r=="object"?3:0){case 0:return typeof n>"u"?0:-1;case 1:return A.FailWith("Cannot compare function values.");case 2:return t<n?-1:1;case 3:if(t===null)i=-1;else if(n===null)i=1;else if("CompareTo"in t)i=t.CompareTo(n);else if("CompareTo0"in t)i=t.CompareTo0(n);else if(t instanceof h.Array&&n instanceof h.Array)i=w.compareArrays(t,n);else if(t instanceof h.Date&&n instanceof h.Date)i=w.compareDates(t,n);else{u=[0];for(var o in t)if(function(s){return t.hasOwnProperty(s)?n.hasOwnProperty(s)?(u[0]=w.Compare(t[s],n[s]),u[0]!==0):(u[0]=1,!0):!1}(o))break;if(u[0]===0){for(var a in n)if(function(s){return n.hasOwnProperty(s)?!t.hasOwnProperty(s)&&(u[0]=-1,!0):!1}(a))break}i=u[0]}return i}},w.compareArrays=function(t,n){var r,i;if(f.length(t)<f.length(n))return-1;if(f.length(t)>f.length(n))return 1;for(r=0,i=0;r===0&&i<f.length(t);)r=w.Compare(f.get(t,i),f.get(n,i)),i=i+1;return r},w.compareDates=function(t,n){return w.Compare(t.getTime(),n.getTime())},se=ae.Dictionary=N.Class({set_Item:function(t,n){this.set(t,n)},ContainsKey:function(t){var n,r;return n=this,r=this.data[this.hash(t)],r==null?!1:f.exists(function(i){return n.equals.apply(null,[A.KeyValue(i)[0],t])},r)},TryGetValue:function(t,n){var r,i,u;return r=this,i=this.data[this.hash(t)],i==null?!1:(u=f.tryPick(function(o){var a;return a=A.KeyValue(o),r.equals.apply(null,[a[0],t])?{$:1,$0:a[1]}:null},i),u!=null&&u.$==1&&(n.set(u.$0),!0))},RemoveKey:function(t){return this.remove(t)},Keys:function(){return new Ye.New(this)},set:function(t,n){var r,i,u,o;r=this,i=this.hash(t),u=this.data[i],u==null?(this.count=this.count+1,this.data[i]=new h.Array({K:t,V:n})):(o=f.tryFindIndex(function(a){return r.equals.apply(null,[A.KeyValue(a)[0],t])},u),o==null?(this.count=this.count+1,u.push({K:t,V:n})):u[o.$0]={K:t,V:n})},remove:function(t){var n,r,i,u;return n=this,r=this.hash(t),i=this.data[r],i==null?!1:(u=f.filter(function(o){return!n.equals.apply(null,[A.KeyValue(o)[0],t])},i),f.length(u)<i.length&&(this.count=this.count-1,this.data[r]=u,!0))},Item:function(t){return this.get(t)},get:function(t){var n,r;return n=this,r=this.data[this.hash(t)],r==null?gt.notPresent():f.pick(function(i){var u;return u=A.KeyValue(i),n.equals.apply(null,[u[0],t])?{$:1,$0:u[1]}:null},r)},GetEnumerator:function(){return W.Get0(f.concat(wt.GetFieldValues(this.data)))}},O,se),se.New$5=N.Ctor(function(){se.New$6.call(this,[],w.Equals,w.Hash)},se),se.New$6=N.Ctor(function(t,n,r){var i,u;O.New.call(this),this.equals=n,this.hash=r,this.count=0,this.data=[],i=W.Get(t);try{for(;i.MoveNext();)u=i.Current(),this.set(u.K,u.V)}finally{typeof i=="object"&&"Dispose"in i&&i.Dispose()}},se),Fe.Id=function(){return Fe.lastId()[0]++,"Form"+h.String(Fe.lastId()[0])},Fe.lastId=function(){return Oe.$cctor(),Oe.lastId},Pe=y.ConcreteVar=N.Class({Get:function(){return this.current},Set:function(t){this.isConst?function(n){return n("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal")}(function(n){Ae.log(n)}):(m.Obsolete(this.snap),this.current=t,this.snap=m.New({$:2,$0:t,$1:[]}))},get_View:function(){return this.view},get_Id:function(){return"uinref"+h.String(this.id)},UpdateMaybe:function(t){var n;n=t(this.Get()),n!=null&&n.$==1&&this.Set(n.$0)}},be,Pe),Pe.New=N.Ctor(function(t,n,r){var i;i=this,be.New.call(this),this.isConst=t,this.current=r,this.snap=n,this.view=function(){return i.snap},this.id=Se.Int()},Pe),m.Obsolete=function(t){var n,r,i,u,o;if(r=t.s,!(r==null||(!(r!=null&&r.$==2||r!=null&&r.$==3)||(n=r.$1,!1))))for(t.s=null,i=0,u=f.length(n)-1;i<=u;i++)o=f.get(n,i),typeof o=="object"?function(a){m.Obsolete(a)}(o):o()},m.New=function(t){return{s:t}},D.CreateEmbedNode=function(){return{Current:null,Dirty:!1}},D.UpdateEmbedNode=function(t,n){t.Current=n,t.Dirty=!0},D.LinkElement=function(t,n){D.InsertDoc(t,n,null)},D.InsertDoc=function(t,n,r){for(var i,u,o;;){if(n!=null&&n.$==1)return D.InsertNode(t,n.$0.El,r);if(n!=null&&n.$==2)i=n.$0,i.Dirty=!1,n=i.Current;else{if(n==null)return r;if(n!=null&&n.$==4)return D.InsertNode(t,n.$0.Text,r);if(n!=null&&n.$==5)return D.InsertNode(t,n.$0,r);if(n!=null&&n.$==6)return f.foldBack(function(a,s){return N.Curried3(function(v,T,V){return T==null||T.constructor===Ge?D.InsertDoc(v,T,V):D.InsertNode(v,T,V)})(t)(a)(s)},n.$0.Els,r);u=n.$1,o=n.$0,n=o,r=D.InsertDoc(t,u,r)}}},D.CreateRunState=function(t,n){return At.New(te.get_Empty(),D.CreateElemNode(t,q.EmptyAttr(),n))},D.PerformAnimatedUpdate=function(t,n,r){return X.get_UseAnimations()?I.Delay(function(){var i,u,o;return i=te.FindAll(r),u=D.ComputeChangeAnim(n,i),o=D.ComputeEnterAnim(n,i),I.Bind(X.Play(X.Append(u,D.ComputeExitAnim(n,i))),function(){return I.Bind(D.SyncElemNodesNextFrame(t,n),function(){return I.Bind(X.Play(o),function(){return n.PreviousNodes=i,I.Return(null)})})})}):D.SyncElemNodesNextFrame(t,n)},D.PerformSyncUpdate=function(t,n,r){var i;i=te.FindAll(r),D.SyncElemNode(t,n.Top),n.PreviousNodes=i},D.CreateElemNode=function(t,n,r){var i;return D.LinkElement(t,r),i=q.Insert(t,n),Je.New(i,r,null,t,Se.Int(),N.GetOptional(i.OnAfterRender))},D.InsertNode=function(t,n,r){return ee.InsertAt(t,r,n),n},D.SyncElemNodesNextFrame=function(t,n){function r(i){h.requestAnimationFrame(function(){D.SyncElemNode(t,n.Top),i()})}return ht.BatchUpdatesEnabled()?I.FromContinuations(function(i,u,o){return r.apply(null,[i,u,o])}):(D.SyncElemNode(t,n.Top),I.Return(null))},D.ComputeExitAnim=function(t,n){return X.Concat(f.map(function(r){return q.GetExitAnim(r.Attr)},te.ToArray(te.Except(n,te.Filter(function(r){return q.HasExitAnim(r.Attr)},t.PreviousNodes)))))},D.ComputeEnterAnim=function(t,n){return X.Concat(f.map(function(r){return q.GetEnterAnim(r.Attr)},te.ToArray(te.Except(t.PreviousNodes,te.Filter(function(r){return q.HasEnterAnim(r.Attr)},n)))))},D.ComputeChangeAnim=function(t,n){var r;function i(u){return q.HasChangeAnim(u.Attr)}return r=function(u){return te.Filter(i,u)},X.Concat(f.map(function(u){return q.GetChangeAnim(u.Attr)},te.ToArray(te.Intersect(r(t.PreviousNodes),r(n)))))},D.SyncElemNode=function(t,n){t||D.SyncElement(n),D.Sync(n.Children),D.AfterRender(n)},D.SyncElement=function(t){function n(r){function i(u){for(var o,a,s,v;;)if(u!=null&&u.$==0){if(a=u.$1,s=u.$0,i(s))return!0;u=a}else if(u!=null&&u.$==2){if(v=u.$0,v.Dirty)return!0;u=v.Current}else return u!=null&&u.$==6&&(o=u.$0,o.Dirty||f.exists(n,o.Holes))}return i(r.Children)}q.Sync(t.El,t.Attr),n(t)&&D.DoSyncElement(t)},D.Sync=function(t){for(var n,r,i,u,o;;){if(t!=null&&t.$==1)return D.SyncElemNode(!1,t.$0);if(t!=null&&t.$==2)i=t.$0,t=i.Current;else{if(t==null)return null;if(t!=null&&t.$==5)return null;if(t!=null&&t.$==4)return n=t.$0,n.Dirty?(n.Text.nodeValue=n.Value,n.Dirty=!1):null;if(t!=null&&t.$==6)return r=t.$0,f.iter(function(a){D.SyncElemNode(!1,a)},r.Holes),f.iter(function(a){q.Sync(a[0],a[1])},r.Attrs),D.AfterRender(r);u=t.$1,o=t.$0,D.Sync(o),t=u}}},D.AfterRender=function(t){var n;n=N.GetOptional(t.Render),n!=null&&n.$==1&&(n.$0(t.El),N.SetOptional(t,"Render",null))},D.DoSyncElement=function(t){var n,r,i;function u(o,a){for(var s,v,T,V;;){if(o!=null&&o.$==1)return o.$0.El;if(o!=null&&o.$==2){if(v=o.$0,v.Dirty)return v.Dirty=!1,D.InsertDoc(n,v.Current,a);o=v.Current}else{if(o==null)return a;if(o!=null&&o.$==4)return o.$0.Text;if(o!=null&&o.$==5)return o.$0;if(o!=null&&o.$==6)return s=o.$0,s.Dirty&&(s.Dirty=!1),f.foldBack(function(K,P){return K==null||K.constructor===Ge?u(K,P):K},s.Els,a);T=o.$1,V=o.$0,o=V,a=u(T,a)}}}n=t.El,Ee.Iter((r=t.El,function(o){ee.RemoveNode(r,o)}),Ee.Except(Ee.DocChildren(t),Ee.Children(t.El,N.GetOptional(t.Delimiters)))),u(t.Children,(i=N.GetOptional(t.Delimiters),i!=null&&i.$==1?i.$0[1]:null))},q.Static=function(t){return new M({$:3,$0:t})},q.Updates=function(t){return fe.MapTreeReduce(function(n){return n.NChanged()},x.Const(),x.Map2Unit,t.DynNodes)},q.AppendTree=function(t,n){var r;return t===null?n:n===null?t:(r=new M({$:2,$0:t,$1:n}),q.SetFlags(r,q.Flags(t)|q.Flags(n)),r)},q.EmptyAttr=function(){return S.$cctor(),S.EmptyAttr},q.Dynamic=function(t,n){return new M({$:1,$0:new Qe.New(t,n)})},q.Insert=function(t,n){var r,i,u;function o(a){for(var s,v;;)if(a!==null){if(a!=null&&a.$==1)return r.push(a.$0);if(a!=null&&a.$==2)s=a.$1,v=a.$0,o(v),a=s;else return a!=null&&a.$==3?a.$0(t):a!=null&&a.$==4?i.push(a.$0):null}else return null}return r=[],i=[],o(n),u=r.slice(0),Et.New(t,q.Flags(n),u,i.length===0?null:{$:1,$0:function(a){k.iter(function(s){s(a)},i)}})},q.SetFlags=function(t,n){t.flags=n},q.Flags=function(t){return t!==null&&t.hasOwnProperty("flags")?t.flags:0},q.HasExitAnim=function(t){var n;return n=2,(t.DynFlags&n)===n},q.GetExitAnim=function(t){return q.GetAnim(t,function(n,r){return n.NGetExitAnim(r)})},q.HasEnterAnim=function(t){var n;return n=1,(t.DynFlags&n)===n},q.GetEnterAnim=function(t){return q.GetAnim(t,function(n,r){return n.NGetEnterAnim(r)})},q.HasChangeAnim=function(t){var n;return n=4,(t.DynFlags&n)===n},q.GetChangeAnim=function(t){return q.GetAnim(t,function(n,r){return n.NGetChangeAnim(r)})},q.GetAnim=function(t,n){return X.Concat(f.map(function(r){return n(r,t.DynElem)},t.DynNodes))},q.Sync=function(t,n){f.iter(function(r){r.NSync(t)},n.DynNodes)},ee.ParseHTMLIntoFakeRoot=function(t){var n,r,i,u,o;function a(s,v){for(var T;;){if(v===0)return s;T=v,s=s.lastChild,v=T-1}}return n=self.document.createElement("div"),ee.rhtml().test(t)?(r=(i=ee.rtagName().exec(t),w.Equals(i,null)?"":f.get(i,1).toLowerCase()),u=(o=ee.wrapMap()[r],o||ee.defaultWrap()),n.innerHTML=u[1]+t.replace(ee.rxhtmlTag(),"<$1></$2>")+u[2],a(n,u[0])):(n.appendChild(self.document.createTextNode(t)),n)},ee.rhtml=function(){return re.$cctor(),re.rhtml},ee.wrapMap=function(){return re.$cctor(),re.wrapMap},ee.defaultWrap=function(){return re.$cctor(),re.defaultWrap},ee.rxhtmlTag=function(){return re.$cctor(),re.rxhtmlTag},ee.rtagName=function(){return re.$cctor(),re.rtagName},ee.IterSelector=function(t,n,r){var i,u,o;for(i=t.querySelectorAll(n),u=0,o=i.length-1;u<=o;u++)r(i[u])},ee.InsertAt=function(t,n,r){var i;r.parentNode===t&&n===(i=r.nextSibling,w.Equals(i,null)?null:i)||t.insertBefore(r,n)},ee.RemoveNode=function(t,n){n.parentNode===t&&t.removeChild(n)},De.Value=function(t){return De.ValueWith(U.StringApply(),t)},De.ValueWith=function(t,n){var r;return r=t(n),M.Append(q.Static(r[0]),De.DynamicCustom(r[1],r[2]))},De.DynamicCustom=function(t,n){return q.Dynamic(n,t)},fe.ofSeqNonCopying=function(t){var n,r;if(t instanceof h.Array)return t;if(t instanceof j)return f.ofList(t);if(t===null)return[];n=[],r=W.Get(t);try{for(;r.MoveNext();)n.push(r.Current());return n}finally{typeof r=="object"&&"Dispose"in r&&r.Dispose()}},fe.TreeReduce=function(t,n,r){var i;function u(o){return function(a){var s;switch(a<=0?0:a===1&&o>=0&&o<i?1:2){case 0:return t;case 1:return f.get(r,o);case 2:return s=a/2>>0,n(u(o)(s),u(o+s)(a-s))}}}return i=f.length(r),u(0)(i)},fe.MapTreeReduce=function(t,n,r,i){var u;function o(a){return function(s){var v;switch(s<=0?0:s===1&&a>=0&&a<u?1:2){case 0:return n;case 1:return t(f.get(i,a));case 2:return v=s/2>>0,r(o(a)(v),o(a+v)(s-v))}}}return u=f.length(i),o(0)(u)},W.Get=function(t){return t instanceof h.Array?W.ArrayEnumerator(t):w.Equals(typeof t,"string")?W.StringEnumerator(t):t.GetEnumerator()},W.ArrayEnumerator=function(t){return new he.New(0,null,function(n){var r;return r=n.s,r<f.length(t)&&(n.c=f.get(t,r),n.s=r+1,!0)},void 0)},W.StringEnumerator=function(t){return new he.New(0,null,function(n){var r;return r=n.s,r<t.length&&(n.c=t[r],n.s=r+1,!0)},void 0)},W.Get0=function(t){return t instanceof h.Array?W.ArrayEnumerator(t):w.Equals(typeof t,"string")?W.StringEnumerator(t):"GetEnumerator0"in t?t.GetEnumerator0():t.GetEnumerator()},he=W.T=N.Class({Dispose:function(){this.d&&this.d(this)},MoveNext:function(){var t;return t=this.n(this),this.e=t?1:2,t},Current:function(){return this.e===1?this.c:this.e===0?A.FailWith("Enumeration has not started. Call MoveNext."):A.FailWith("Enumeration already finished.")}},O,he),he.New=N.Ctor(function(t,n,r,i){O.New.call(this),this.s=t,this.c=n,this.n=r,this.d=i,this.e=0},he),f.get=function(t,n){return f.checkBounds(t,n),t[n]},f.length=function(t){return t.dims===2?t.length*t.length:t.length},f.checkBounds=function(t,n){(n<0||n>=t.length)&&A.FailWith("Index was outside the bounds of the array.")},f.set=function(t,n,r){f.checkBounds(t,n),t[n]=r},ue.$cctor=function(){ue.$cctor=h.ignore,ue.LoadedTemplates=new se.New$5,ue.LocalTemplatesLoaded=!1,ue.GlobalHoles=new se.New$5,ue.TextHoleRE="\\${([^}]+)}",ue.RenderedFullDocTemplate=null},Z=ae.HashSet=N.Class({SAdd:function(t){return this.add(t)},Contains:function(t){var n;return n=this.data[this.hash(t)],n==null?!1:this.arrContains(t,n)},add:function(t){var n,r;return n=this.hash(t),r=this.data[n],r==null?(this.data[n]=[t],this.count=this.count+1,!0):this.arrContains(t,r)?!1:(r.push(t),this.count=this.count+1,!0)},arrContains:function(t,n){var r,i,u;for(r=!0,i=0,u=n.length;r&&i<u;)this.equals.apply(null,[n[i],t])?r=!1:i=i+1;return!r},GetEnumerator:function(){return W.Get(at.concat(this.data))},ExceptWith:function(t){var n;n=W.Get(t);try{for(;n.MoveNext();)this.Remove(n.Current())}finally{typeof n=="object"&&"Dispose"in n&&n.Dispose()}},Count:function(){return this.count},IntersectWith:function(t){var n,r,i,u,o;for(n=new Z.New$4(t,this.equals,this.hash),r=at.concat(this.data),i=0,u=r.length-1;i<=u;i++)o=r[i],n.Contains(o)||this.Remove(o)},Remove:function(t){var n;return n=this.data[this.hash(t)],n==null?!1:this.arrRemove(t,n)&&(this.count=this.count-1,!0)},CopyTo:function(t,n){var r,i,u;for(r=at.concat(this.data),i=0,u=r.length-1;i<=u;i++)f.set(t,i+n,r[i])},arrRemove:function(t,n){var r,i,u;for(r=!0,i=0,u=n.length;r&&i<u;)this.equals.apply(null,[n[i],t])?(n.splice.apply(n,[i,1]),r=!1):i=i+1;return!r}},O,Z),Z.New$3=N.Ctor(function(){Z.New$4.call(this,[],w.Equals,w.Hash)},Z),Z.New$4=N.Ctor(function(t,n,r){var i;O.New.call(this),this.equals=n,this.hash=r,this.data=[],this.count=0,i=W.Get(t);try{for(;i.MoveNext();)this.add(i.Current())}finally{typeof i=="object"&&"Dispose"in i&&i.Dispose()}},Z),Z.New$2=N.Ctor(function(t){Z.New$4.call(this,t,w.Equals,w.Hash)},Z),Se.Int=function(){return Se.set_counter(Se.counter()+1),Se.counter()},Se.set_counter=function(t){Me.$cctor(),Me.counter=t},Se.counter=function(){return Me.$cctor(),Me.counter},Je=y.DocElemNode=N.Class({Equals:function(t){return this.ElKey===t.ElKey},GetHashCode:function(){return this.ElKey}},null,Je),Je.New=function(t,n,r,i,u,o){var a;return new Je((a={Attr:t,Children:n,El:i,ElKey:u},N.SetOptional(a,"Delimiters",r),N.SetOptional(a,"Render",o),a))},U.StringApply=function(){return S.$cctor(),S.StringApply},U.ApplyValue=function(t,n,r){var i;function u(o,a){return a==null?null:o(a.$0)}return i=null,[function(o){function a(){r.UpdateMaybe(function(s){var v;return i=t(o),i!=null&&i.$==1&&!w.Equals(i.$0,s)&&(v=[i,i.$0],!0)?v[0]:null})}o.addEventListener("change",a),o.addEventListener("input",a),o.addEventListener("keypress",a)},function(o){var a;return a=n(o),function(s){return u(a,s)}},x.Map(function(o){return i!=null&&i.$==1&&w.Equals(i.$0,o)&&(i.$0,!0)?null:{$:1,$0:o}},r.get_View())]},U.StringSet=function(){return S.$cctor(),S.StringSet},U.StringGet=function(){return S.$cctor(),S.StringGet},U.DateTimeSetUnchecked=function(){return S.$cctor(),S.DateTimeSetUnchecked},U.DateTimeGetUnchecked=function(){return S.$cctor(),S.DateTimeGetUnchecked},U.FileApplyValue=function(t,n,r){var i;function u(o,a){return a==null?null:o(a.$0)}return i=null,[function(o){o.addEventListener("change",function(){r.UpdateMaybe(function(a){var s;return i=t(o),i!=null&&i.$==1&&i.$0!==a&&(s=[i,i.$0],!0)?s[0]:null})})},function(o){var a;return a=n(o),function(s){return u(a,s)}},x.Map(function(o){return i!=null&&i.$==1&&w.Equals(i.$0,o)&&(i.$0,!0)?null:{$:1,$0:o}},r.get_View())]},U.FileSetUnchecked=function(){return S.$cctor(),S.FileSetUnchecked},U.FileGetUnchecked=function(){return S.$cctor(),S.FileGetUnchecked},U.IntSetUnchecked=function(){return S.$cctor(),S.IntSetUnchecked},U.IntGetUnchecked=function(){return S.$cctor(),S.IntGetUnchecked},U.IntSetChecked=function(){return S.$cctor(),S.IntSetChecked},U.IntGetChecked=function(){return S.$cctor(),S.IntGetChecked},U.FloatSetUnchecked=function(){return S.$cctor(),S.FloatSetUnchecked},U.FloatGetUnchecked=function(){return S.$cctor(),S.FloatGetUnchecked},U.FloatSetChecked=function(){return S.$cctor(),S.FloatSetChecked},U.FloatGetChecked=function(){return S.$cctor(),S.FloatGetChecked},f.ofList=function(t){var n,r;for(r=[],n=t;n.$!=0;)r.push(B.head(n)),n=B.tail(n);return r},f.exists=function(t,n){var r,i,u;for(r=!1,i=0,u=f.length(n);!r&&i<u;)t(n[i])?r=!0:i=i+1;return r},f.tryPick=function(t,n){var r,i,u;for(r=null,i=0;i<n.length&&r==null;)u=t(n[i]),u!=null&&u.$==1&&(r=u),i=i+1;return r},f.tryFindIndex=function(t,n){var r,i;for(r=null,i=0;i<n.length&&r==null;)t(n[i])&&(r={$:1,$0:i}),i=i+1;return r},f.filter=function(t,n){var r,i,u;for(r=[],i=0,u=n.length-1;i<=u;i++)t(n[i])&&r.push(n[i]);return r},f.map=function(t,n){var r,i,u;for(r=new h.Array(n.length),i=0,u=n.length-1;i<=u;i++)r[i]=t(n[i]);return r},f.iter=function(t,n){var r,i;for(r=0,i=n.length-1;r<=i;r++)t(n[r])},f.foldBack=function(t,n,r){var i,u,o,a;for(i=r,u=n.length,o=1,a=u;o<=a;o++)i=t(n[u-o],i);return i},f.pick=function(t,n){var r;return r=f.tryPick(t,n),r==null?A.FailWith("KeyNotFoundException"):r.$0},f.concat=function(t){return h.Array.prototype.concat.apply([],f.ofSeq(t))},f.ofSeq=function(t){var n,r;if(t instanceof h.Array)return t.slice();if(t instanceof j)return f.ofList(t);n=[],r=W.Get(t);try{for(;r.MoveNext();)n.push(r.Current());return n}finally{typeof r=="object"&&"Dispose"in r&&r.Dispose()}},f.choose=function(t,n){var r,i,u,o;for(r=[],i=0,u=n.length-1;i<=u;i++)o=t(n[i]),o==null||r.push(o.$0);return r},f.create=function(t,n){var r,i,u;for(r=new h.Array(t),i=0,u=t-1;i<=u;i++)r[i]=n;return r},f.init=function(t,n){var r,i,u;for(t<0&&A.FailWith("Negative size given."),r=new h.Array(t),i=0,u=t-1;i<=u;i++)r[i]=n(i);return r},f.forall=function(t,n){var r,i,u;for(r=!0,i=0,u=f.length(n);r&&i<u;)t(n[i])?i=i+1:r=!1;return r},we=y.Elt=N.Class({},d,we),we.New=function(t,n,r){var i,u;return i=D.CreateElemNode(t,n,r.docNode),u=ke.Create(r.updates),new we.New$1({$:1,$0:i},x.Map2Unit(q.Updates(i.Attr),u.v),t,u)},we.New$1=N.Ctor(function(t,n,r,i){d.New.call(this,t,n),this.docNode$1=t,this.updates$1=n,this.elt=r,this.rvUpdates=i},we),gt.notPresent=function(){throw new Ce.New},Q.convertTextNode=function(t){var n,r,i,u,o;for(n=null,r=0,i=t.textContent,u=new h.RegExp(F.TextHoleRE(),"g");n=u.exec(i),n!==null;)t.parentNode.insertBefore(self.document.createTextNode(Ie.string(i,{$:1,$0:r},{$:1,$0:u.lastIndex-f.get(n,0).length-1})),t),r=u.lastIndex,o=self.document.createElement("span"),o.setAttribute("ws-replace",f.get(n,1).toLowerCase()),t.parentNode.insertBefore(o,t);u.lastIndex=0,t.textContent=Ie.string(i,{$:1,$0:r},null)},Q.failNotLoaded=function(t){Ae.warn("Instantiating non-loaded template",t)},Q.fillTextHole=function(t,n,r){var i;return i=t.querySelector("[ws-replace]"),w.Equals(i,null)?(Ae.warn("Filling non-existent text hole",r),null):(i.parentNode.replaceChild(self.document.createTextNode(n),i),{$:1,$0:i.getAttribute("ws-replace")})},Q.removeHolesExcept=function(t,n){function r(i){F.foreachNotPreserved(t,"["+i+"]",function(u){n.Contains(u.getAttribute(i))||u.removeAttribute(i)})}r("ws-attr"),r("ws-onafterrender"),r("ws-var"),F.foreachNotPreserved(t,"[ws-hole]",function(i){if(!n.Contains(i.getAttribute("ws-hole")))for(i.removeAttribute("ws-hole");i.hasChildNodes();)i.removeChild(i.lastChild)}),F.foreachNotPreserved(t,"[ws-replace]",function(i){n.Contains(i.getAttribute("ws-replace"))||i.parentNode.removeChild(i)}),F.foreachNotPreserved(t,"[ws-on]",function(i){i.setAttribute("ws-on",H.concat(" ",f.filter(function(u){return n.Contains(f.get(H.SplitChars(u,[":"],1),1))},H.SplitChars(i.getAttribute("ws-on"),[" "],1))))}),F.foreachNotPreserved(t,"[ws-attr-holes]",function(i){var u,o,a,s,v;for(u=H.SplitChars(i.getAttribute("ws-attr-holes"),[" "],1),o=0,a=u.length-1;o<=a;o++)s=f.get(u,o),i.setAttribute(s,(v=new h.RegExp(F.TextHoleRE(),"g"),i.getAttribute(s).replace(v,function(T,V){return n.Contains(V)?T:""})))})},Q.fillInstanceAttrs=function(t,n){var r,i,u,o,a;if(Q.convertAttrs(n),r=n.nodeName.toLowerCase(),i=t.querySelector("[ws-attr="+r+"]"),w.Equals(i,null))Ae.warn("Filling non-existent attr hole",r);else for(i.removeAttribute("ws-attr"),u=0,o=n.attributes.length-1;u<=o;u++)a=n.attributes.item(u),a.name=="class"&&i.hasAttribute("class")?i.setAttribute("class",i.getAttribute("class")+" "+a.nodeValue):i.setAttribute(a.name,a.nodeValue)},Q.mapHoles=function(t,n){function r(i){F.foreachNotPreserved(t,"["+i+"]",function(u){var o,a;o=(a=null,[n.TryGetValue(u.getAttribute(i).toLowerCase(),{get:function(){return a},set:function(s){a=s}}),a]),o[0]&&u.setAttribute(i,o[1])})}r("ws-hole"),r("ws-replace"),r("ws-attr"),r("ws-onafterrender"),r("ws-var"),F.foreachNotPreserved(t,"[ws-on]",function(i){i.setAttribute("ws-on",H.concat(" ",f.map(function(u){var o,a,s;return o=H.SplitChars(u,[":"],1),a=(s=null,[n.TryGetValue(f.get(o,1),{get:function(){return s},set:function(v){s=v}}),s]),a[0]?f.get(o,0)+":"+a[1]:u},H.SplitChars(i.getAttribute("ws-on"),[" "],1))))}),F.foreachNotPreserved(t,"[ws-attr-holes]",function(i){var u,o,a;for(u=H.SplitChars(i.getAttribute("ws-attr-holes"),[" "],1),o=0,a=u.length-1;o<=a;o++)(function(){var s;function v(T,V){var K;return K=A.KeyValue(V),T.replace(new h.RegExp("\\${"+K[0]+"}","ig"),"${"+K[1]+"}")}return s=f.get(u,o),i.setAttribute(s,N.Curried3(k.fold)(v)(i.getAttribute(s))(n))})()})},Q.fill=function(t,n,r){for(;;)if(t.hasChildNodes())r=n.insertBefore(t.lastChild,r);else return null},Q.convertAttrs=function(t){var n,r,i,u,o,a,s,v;function T(V){var K;K=t.getAttribute(V),K==null||t.setAttribute(V,K.toLowerCase())}for(n=t.attributes,r=[],i=[],u=[],o=0,a=n.length-1;o<=a;o++)s=n.item(o),H.StartsWith(s.nodeName,"ws-on")&&s.nodeName!="ws-onafterrender"&&s.nodeName!="ws-on"?(r.push(s.nodeName),i.push(Ie.string(s.nodeName,{$:1,$0:5},null)+":"+s.nodeValue.toLowerCase())):!H.StartsWith(s.nodeName,"ws-")&&new h.RegExp(F.TextHoleRE()).test(s.nodeValue)&&(s.nodeValue=(v=new h.RegExp(F.TextHoleRE(),"g"),s.nodeValue.replace(v,function(V,K){return"${"+K.toLowerCase()+"}"})),u.push(s.nodeName));i.length!=0&&t.setAttribute("ws-on",H.concat(" ",i)),u.length!=0&&t.setAttribute("ws-attr-holes",H.concat(" ",u)),T("ws-hole"),T("ws-replace"),T("ws-attr"),T("ws-onafterrender"),T("ws-var"),f.iter(function(V){t.removeAttribute(V)},r)},Ie.string=function(t,n,r){var i,u;return n==null?r!=null&&r.$==1?(i=r.$0,i<0?"":t.slice(0,i+1)):"":r==null?t.slice(n.$0):(u=r.$0,u<0?"":t.slice(n.$0,u+1))},k.insufficient=function(){return A.FailWith("The input sequence has an insufficient number of elements.")},k.nonNegative=function(){return A.FailWith("The input must be non-negative.")},Ye=ae.KeyCollection=N.Class({GetEnumerator:function(){return W.Get(k.map(function(t){return t.K},this.d))}},O,Ye),Ye.New=N.Ctor(function(t){O.New.call(this),this.d=t},Ye),ot.TryParseInt32=function(t,n){return ot.TryParse(t,-2147483648,2147483647,n)},X.get_UseAnimations=function(){return ne.UseAnimations()},X.Play=function(t){return I.Delay(function(){return I.Bind(X.Run(h.ignore,ne.Actions(t)),function(){return ne.Finalize(t),I.Return(null)})})},X.Append=function(t,n){return{$:0,$0:de.Append(t.$0,n.$0)}},X.Run=function(t,n){var r;function i(u){function o(a){return function(s){var v;return v=s-a,n.Compute(v),t(),v<=r?void h.requestAnimationFrame(function(T){o(a)(T)}):u()}}h.requestAnimationFrame(function(a){o(a)(a)})}return r=n.Duration,r===0?I.Zero():I.FromContinuations(function(u,o,a){return i.apply(null,[u,o,a])})},X.Concat=function(t){return{$:0,$0:de.Concat(k.map(ne.List,t))}},X.get_Empty=function(){return{$:0,$0:de.Empty()}},ht.BatchUpdatesEnabled=function(){return Ze.$cctor(),Ze.BatchUpdatesEnabled},Nt.StartProcessor=function(t){var n;function r(){return I.Delay(function(){return I.Bind(t,function(){var i;return i=n[0],w.Equals(i,1)?(n[0]=0,I.Zero()):w.Equals(i,2)?(n[0]=1,r()):I.Zero()})})}return n=[0],function(){var i;i=n[0],w.Equals(i,0)?(n[0]=1,I.Start(r(),null)):w.Equals(i,1)&&(n[0]=2)}},Oe.$cctor=function(){var t;Oe.$cctor=h.ignore,Oe.lastId=[0],Oe.Int=(t=[0],function(){return t[0]++,t[0]})},Et.New=function(t,n,r,i){var u;return u={DynElem:t,DynFlags:n,DynNodes:r},N.SetOptional(u,"OnAfterRender",i),u},S.$cctor=function(){var t,n,r,i,u,o,a,s,v,T,V,K,P,L;S.$cctor=h.ignore,S.EmptyAttr=null,S.BoolCheckedApply=function(C){function g(E,_){return _!=null&&_.$==1?void(E.checked=_.$0):null}return[function(E){E.addEventListener("change",function(){return C.Get()!=E.checked?C.Set(E.checked):null})},function(E){return function(_){return g(E,_)}},x.Map(function(E){return{$:1,$0:E}},C.get_View())]},S.StringSet=function(C){return function(g){C.value=g}},S.StringGet=function(C){return{$:1,$0:C.value}},S.StringApply=(t=U.StringGet(),n=U.StringSet(),function(C){return U.ApplyValue(t,n,C)}),S.DateTimeSetUnchecked=function(C){return function(g){C.value=new h.Date(g).toLocaleString()}},S.DateTimeGetUnchecked=function(C){var g,E,_,z;return g=C.value,_e.isBlank(g)?{$:1,$0:-864e13}:(E=(_=0,[(z=Dt.TryParse(g),z!=null&&z.$==1&&(_=z.$0,!0)),_]),E[0]?{$:1,$0:E[1]}:null)},S.DateTimeApplyUnchecked=(r=U.DateTimeGetUnchecked(),i=U.DateTimeSetUnchecked(),function(C){return U.ApplyValue(r,i,C)}),S.FileSetUnchecked=function(){return function(){return null}},S.FileGetUnchecked=function(C){var g;return g=C.files,{$:1,$0:f.ofSeq(k.delay(function(){return k.map(function(E){return g.item(E)},A.range(0,g.length-1))}))}},S.FileApplyUnchecked=(u=U.FileGetUnchecked(),o=U.FileSetUnchecked(),function(C){return U.FileApplyValue(u,o,C)}),S.IntSetUnchecked=function(C){return function(g){C.value=h.String(g)}},S.IntGetUnchecked=function(C){var g,E;return g=C.value,_e.isBlank(g)?{$:1,$0:0}:(E=+g,E!==E>>0?null:{$:1,$0:E})},S.IntApplyUnchecked=(a=U.IntGetUnchecked(),s=U.IntSetUnchecked(),function(C){return U.ApplyValue(a,s,C)}),S.IntSetChecked=function(C){return function(g){var E;return E=g.get_Input(),C.value!=E?void(C.value=E):null}},S.IntGetChecked=function(C){var g,E,_;return g=C.value,{$:1,$0:_e.isBlank(g)?!C.checkValidity||C.checkValidity()?new me({$:2,$0:g}):new me({$:1,$0:g}):(E=(_=0,[ot.TryParseInt32(g,{get:function(){return _},set:function(z){_=z}}),_]),E[0]?new me({$:0,$0:E[1],$1:g}):new me({$:1,$0:g}))}},S.IntApplyChecked=(v=U.IntGetChecked(),T=U.IntSetChecked(),function(C){return U.ApplyValue(v,T,C)}),S.FloatSetUnchecked=function(C){return function(g){C.value=h.String(g)}},S.FloatGetUnchecked=function(C){var g,E;return g=C.value,_e.isBlank(g)?{$:1,$0:0}:(E=+g,h.isNaN(E)?null:{$:1,$0:E})},S.FloatApplyUnchecked=(V=U.FloatGetUnchecked(),K=U.FloatSetUnchecked(),function(C){return U.ApplyValue(V,K,C)}),S.FloatSetChecked=function(C){return function(g){var E;return E=g.get_Input(),C.value!=E?void(C.value=E):null}},S.FloatGetChecked=function(C){var g,E;return g=C.value,{$:1,$0:_e.isBlank(g)?!C.checkValidity||C.checkValidity()?new me({$:2,$0:g}):new me({$:1,$0:g}):(E=+g,h.isNaN(E)?new me({$:1,$0:g}):new me({$:0,$0:E,$1:g}))}},S.FloatApplyChecked=(P=U.FloatGetChecked(),L=U.FloatSetChecked(),function(C){return U.ApplyValue(P,L,C)})},ke=y.Updates=N.Class({},null,ke),ke.Create=function(t){var n;return n=null,n=ke.New(t,null,function(){var r;return r=n.s,r===null&&(r=m.Copy(n.c()),n.s=r,m.WhenObsoleteRun(r,function(){n.s=null})),r}),n},ke.New=function(t,n,r){return new ke({c:t,s:n,v:r})},H.concat=function(t,n){return f.ofSeq(n).join(t)},H.SplitChars=function(t,n,r){return H.Split(t,new h.RegExp("["+H.RegexEscape(n.join(""))+"]"),r)},H.StartsWith=function(t,n){return t.substring(0,n.length)==n},H.Split=function(t,n,r){return r===1?f.filter(function(i){return i!==""},H.SplitWith(t,n)):H.SplitWith(t,n)},H.RegexEscape=function(t){return t.replace(new h.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&")},H.forall=function(t,n){return k.forall(t,H.protect(n))},H.SplitWith=function(t,n){return t.split(n)},H.protect=function(t){return t??""},At.New=function(t,n){return{PreviousNodes:t,Top:n}},te.get_Empty=function(){return{$:0,$0:new Z.New$3}},te.FindAll=function(t){var n;function r(o,a){for(var s,v,T,V,K;;)switch(o){case 0:if(a!=null&&a.$==0)v=a.$1,T=a.$0,r(0,T),a=v;else if(a!=null&&a.$==1)V=a.$0,a=V,o=1;else if(a!=null&&a.$==2)K=a.$0,a=K.Current;else return a!=null&&a.$==6?(s=a.$0.Holes,function(P){return function(L){f.iter(P,L)}}(u)(s)):null;break;case 1:n.push(a),a=a.Children,o=0;break}}function i(o){return r(0,o)}function u(o){return r(1,o)}return n=[],i(t),{$:0,$0:new Z.New$2(n)}},te.Filter=function(t,n){return{$:0,$0:ce.Filter(t,n.$0)}},te.Except=function(t,n){return{$:0,$0:ce.Except(t.$0,n.$0)}},te.ToArray=function(t){return ce.ToArray(t.$0)},te.Intersect=function(t,n){return{$:0,$0:ce.Intersect(t.$0,n.$0)}},I.Delay=function(t){return function(n){try{t(null)(n)}catch(r){n.k({$:1,$0:r})}}},I.Bind=function(t,n){return I.checkCancel(function(r){t(dt.New(function(i){var u;i.$==0?(u=i.$0,I.scheduler().Fork(function(){try{n(u)(r)}catch(o){r.k({$:1,$0:o})}})):I.scheduler().Fork(function(){r.k(i)})},r.ct))})},I.Zero=function(){return le.$cctor(),le.Zero},I.Start=function(t,n){var r,i;r=(i=I.defCTS()[0],n==null?i:n.$0),I.scheduler().Fork(function(){r.c||t(dt.New(function(u){u.$==1&&I.UncaughtAsyncError(u.$0)},r))})},I.Return=function(t){return function(n){n.k({$:0,$0:t})}},I.scheduler=function(){return le.$cctor(),le.scheduler},I.checkCancel=function(t){return function(n){n.ct.c?I.cancel(n):t(n)}},I.defCTS=function(){return le.$cctor(),le.defCTS},I.UncaughtAsyncError=function(t){Ae.log("WebSharper: Uncaught asynchronous exception",t)},I.FromContinuations=function(t){return function(n){var r;function i(u){r[0]?A.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times"):(r[0]=!0,I.scheduler().Fork(u))}r=[!1],t(function(u){i(function(){n.k({$:0,$0:u})})},function(u){i(function(){n.k({$:1,$0:u})})},function(u){i(function(){n.k({$:2,$0:u})})})}},I.cancel=function(t){t.k({$:2,$0:new ge.New(t.ct)})},ne.UseAnimations=function(){return He.$cctor(),He.UseAnimations},ne.Actions=function(t){return ne.ConcatActions(f.choose(function(n){return n.$==1?{$:1,$0:n.$0}:null},de.ToArray(t.$0)))},ne.Finalize=function(t){f.iter(function(n){n.$==0&&n.$0()},de.ToArray(t.$0))},ne.ConcatActions=function(t){var n,r,i,u;return n=fe.ofSeqNonCopying(t),r=f.length(n),r===0?ne.Const():r===1?f.get(n,0):(i=k.max(k.map(function(o){return o.Duration},n)),u=f.map(function(o){return ne.Prolong(i,o)},n),ne.Def(i,function(o){f.iter(function(a){a.Compute(o)},u)}))},ne.List=function(t){return t.$0},ne.Const=function(t){return ne.Def(0,function(){return t})},ne.Def=function(t,n){return{Compute:n,Duration:t}},ne.Prolong=function(t,n){var r,i,u;return r=n.Compute,i=n.Duration,u=Be.Create(function(){return n.Compute(n.Duration)}),{Compute:function(o){return o>=i?u.f():r(o)},Duration:t}},Ze.$cctor=function(){Ze.$cctor=h.ignore,Ze.BatchUpdatesEnabled=!0},Me.$cctor=function(){Me.$cctor=h.ignore,Me.counter=0},Tt.Clear=function(t){t.splice(0,f.length(t))},_e.isBlank=function(t){return H.forall(Ft.IsWhiteSpace,t)},me=y.CheckedInput=N.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1}},null,me),re.$cctor=function(){var t;re.$cctor=h.ignore,re.rxhtmlTag=new h.RegExp("<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>","gi"),re.rtagName=new h.RegExp("<([\\w:]+)"),re.rhtml=new h.RegExp("<|&#?\\w+;"),re.wrapMap=(t=[1,"<table>","</table>"],{option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:t,tbody:t,tfoot:t,tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><colgroup>","</colgoup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"]}),re.defaultWrap=[0,"",""]},He.$cctor=function(){He.$cctor=h.ignore,He.CubicInOut=Le.Custom(function(t){var n;return n=t*t,3*n-2*(n*t)}),He.UseAnimations=!0},de.Append=function(t,n){return t.$==0?n:n.$==0?t:{$:2,$0:t,$1:n}},de.ToArray=function(t){var n;function r(i){for(var u,o;;){if(i.$==1)return n.push(i.$0);if(i.$==2)u=i.$1,o=i.$0,r(o),i=u;else return i.$==3?f.iter(function(a){n.push(a)},i.$0):null}}return n=[],r(t),n.slice(0)},de.Concat=function(t){var n;return n=fe.ofSeqNonCopying(t),fe.TreeReduce(de.Empty(),de.Append,n)},de.Empty=function(){return tt.$cctor(),tt.Empty},at.concat=function(t){var n;n=[];for(var r in t)n.push.apply(n,t[r]);return n},Qe=y.DynamicAttrNode=N.Class({NChanged:function(){return this.updates},NGetExitAnim:function(t){return X.get_Empty()},NGetEnterAnim:function(t){return X.get_Empty()},NGetChangeAnim:function(t){return X.get_Empty()},NSync:function(t){this.dirty&&(this.push(t)(this.value),this.dirty=!1)}},O,Qe),Qe.New=N.Ctor(function(t,n){var r;r=this,O.New.call(this),this.push=n,this.value=void 0,this.dirty=!1,this.updates=x.Map(function(i){r.value=i,r.dirty=!0},t)},Qe),Ft.IsWhiteSpace=function(t){return t.match(new h.RegExp("\\s"))!==null},Dt.TryParse=function(t){var n;return n=$t.parse(t),h.isNaN(n)?null:{$:1,$0:n}},ot.TryParse=function(t,n,r,i){var u,o;return u=+t,o=u===u-u%1&&u>=n&&u<=r,o&&i.set(u),o},Ce=p.KeyNotFoundException=N.Class({},pt,Ce),Ce.New=N.Ctor(function(){Ce.New$1.call(this,"The given key was not present in the dictionary.")},Ce),Ce.New$1=N.Ctor(function(t){this.message=t,Ge.setPrototypeOf(this,Ce.prototype)},Ce),Xe=I.Scheduler=N.Class({Fork:function(t){var n;n=this,this.robin.push(t),this.idle&&(this.idle=!1,h.setTimeout(function(){n.tick()},0))},tick:function(){var t,n,r;for(n=this,r=$t.now(),t=!0;t;)this.robin.length===0?(this.idle=!0,t=!1):(this.robin.shift()(),$t.now()-r>40&&(h.setTimeout(function(){n.tick()},0),t=!1))}},O,Xe),Xe.New=N.Ctor(function(){O.New.call(this),this.idle=!0,this.robin=[]},Xe),Le=y.Easing=N.Class({},O,Le),Le.Custom=function(t){return new Le.New(t)},Le.New=N.Ctor(function(t){O.New.call(this),this.transformTime=t},Le),dt.New=function(t,n){return{k:t,ct:n}},le.$cctor=function(){le.$cctor=h.ignore,le.noneCT=It.New(!1,[]),le.scheduler=new Xe.New,le.defCTS=[new et.New],le.Zero=I.Return(),le.GetCT=function(t){t.k({$:0,$0:t.ct})}},It.New=function(t,n){return{c:t,r:n}},ce.Filter=function(t,n){return new Z.New$2(f.filter(t,ce.ToArray(n)))},ce.Except=function(t,n){var r;return r=new Z.New$2(ce.ToArray(n)),r.ExceptWith(ce.ToArray(t)),r},ce.ToArray=function(t){var n;return n=f.create(t.Count(),void 0),t.CopyTo(n,0),n},ce.Intersect=function(t,n){var r;return r=new Z.New$2(ce.ToArray(t)),r.IntersectWith(ce.ToArray(n)),r},et=p.CancellationTokenSource=N.Class({},O,et),et.New=N.Ctor(function(){O.New.call(this),this.c=!1,this.pending=null,this.r=[],this.init=1},et),Ee.Children=function(t,n){var r,i,u;if(n!=null&&n.$==1){for(u=[],r=n.$0[0].nextSibling;r!==n.$0[1];)u.push(r),r=r.nextSibling;return{$:0,$0:u}}else return{$:0,$0:f.init(t.childNodes.length,(i=t.childNodes,function(o){return i[o]}))}},Ee.Except=function(t,n){var r;return r=t.$0,{$:0,$0:f.filter(function(i){return f.forall(function(u){return i!==u},r)},n.$0)}},Ee.Iter=function(t,n){f.iter(t,n.$0)},Ee.DocChildren=function(t){var n;function r(i){for(var u,o,a,s;;)if(i!=null&&i.$==2)o=i.$0,i=o.Current;else{if(i!=null&&i.$==1)return n.push(i.$0.El);if(i==null)return null;if(i!=null&&i.$==5)return n.push(i.$0);if(i!=null&&i.$==4)return n.push(i.$0.Text);if(i!=null&&i.$==6)return u=i.$0.Els,function(v){return function(T){f.iter(v,T)}}(function(v){v==null||v.constructor===Ge?r(v):n.push(v)})(u);a=i.$1,s=i.$0,r(s),i=a}}return n=[],r(t.Children),{$:0,$0:fe.ofSeqNonCopying(n)}},ge=p.OperationCanceledException=N.Class({},pt,ge),ge.New=N.Ctor(function(t){ge.New$1.call(this,"The operation was canceled.",null,t)},ge),ge.New$1=N.Ctor(function(t,n,r){this.message=t,this.inner=n,Ge.setPrototypeOf(this,ge.prototype),this.ct=r},ge),Be.Create=function(t){return Mt.New(!1,t,Be.forceLazy)},Be.forceLazy=function(){var t;return t=this.v(),this.c=!0,this.v=t,this.f=Be.cachedLazy,t},Be.cachedLazy=function(){return this.v},tt.$cctor=function(){tt.$cctor=h.ignore,tt.Empty={$:0}},Mt.New=function(t,n,r){return{c:t,v:n,f:r}},N.OnLoad(function(){c.Main()})})(self);typeof WebSharper<"u"&&(WebSharper.Runtime.ScriptBasePath="/Content/",WebSharper.Runtime.Start());
